{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/rohitparakh/Downloads/mobile-mern-first-main/Rohit-App/src/screens/Cart.js\";\n\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { AntDesign } from '@expo/vector-icons';\nimport { APIbaseURL, styles } from \"../../App\";\nimport { connect } from \"react-redux\";\nimport { ScrollView, FlatList } from 'react-native-gesture-handler';\nimport axios from 'axios';\nimport { addToCart as _addToCart, decreaseQuantity as _decreaseQuantity, deleteFromCart as _deleteFromCart, deleteAllFromCart as _deleteAllFromCart } from \"../../redux/actions/cartActions\";\n\nvar Cart = function Cart(_ref) {\n  var navigation = _ref.navigation,\n      cartItems = _ref.cartItems,\n      userData = _ref.userData,\n      addToCart = _ref.addToCart,\n      decreaseQuantity = _ref.decreaseQuantity,\n      deleteFromCart = _ref.deleteFromCart,\n      deleteAllFromCart = _ref.deleteAllFromCart;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      price = _useState2[0],\n      setPrice = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      serverOrder = _useState4[0],\n      setServerOrder = _useState4[1];\n\n  var _renderCart = function _renderCart(_ref2) {\n    var item = _ref2.item,\n        index = _ref2.index;\n    return React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate('Details', {\n          item: item\n        });\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 6\n      }\n    }, React.createElement(View, {\n      style: css.renderCartItem,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 17\n      }\n    }, React.createElement(View, {\n      style: {\n        flex: 1,\n        flexDirection: 'row',\n        alignItems: 'center',\n        marginLeft: 15\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 17\n      }\n    }, React.createElement(Text, {\n      style: {\n        marginRight: 5\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 21\n      }\n    }, ++index, \".\"), React.createElement(Image, {\n      style: css.renderItemImg,\n      source: {\n        uri: \"https://source.unsplash.com/190x150/?\" + item.title\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 19\n      }\n    }), React.createElement(View, {\n      style: {\n        marginLeft: 15,\n        flex: 1,\n        justifyContent: 'center'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 19\n      }\n    }, React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 21\n      }\n    }, item.title), React.createElement(Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 21\n      }\n    }, \"\\u20B9 \", item.price))), React.createElement(View, {\n      style: {\n        position: 'absolute',\n        top: 15,\n        right: '20%',\n        maxHeight: 45,\n        marginRight: -15\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 19\n      }\n    }, React.createElement(View, {\n      style: {\n        flex: 1,\n        flexDirection: 'row'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 26\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return decreaseQuantity(item, null);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 32\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: '#fff',\n        backgroundColor: '#c01c27',\n        padding: 15\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 32\n      }\n    }, \"-\")), React.createElement(Text, {\n      style: {\n        flex: 0,\n        color: '#fff',\n        backgroundColor: '#666',\n        paddingHorizontal: 10,\n        paddingVertical: 15\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 32\n      }\n    }, item.quantity), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return addToCart(item, null, 1, null, null);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 32\n      }\n    }, React.createElement(Text, {\n      style: {\n        color: '#fff',\n        backgroundColor: '#c01c27',\n        padding: 15\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 32\n      }\n    }, \"+\")))), React.createElement(TouchableOpacity, {\n      style: {\n        marginRight: 15\n      },\n      onPress: function onPress() {\n        return deleteFromCart(item);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 19\n      }\n    }, React.createElement(AntDesign, {\n      name: \"delete\",\n      size: 20,\n      color: \"#c01c27\",\n      style: {\n        paddingHorizontal: 15\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 32\n      }\n    }))));\n  };\n\n  var computeOrderFromCart = function computeOrderFromCart() {\n    setPrice(0);\n    cartItems.forEach(function (item) {\n      setPrice(function (prev) {\n        return prev + item.price * item.quantity;\n      });\n    });\n  };\n\n  useEffect(function () {\n    setPrice(0);\n    computeOrderFromCart();\n  }, [cartItems]);\n  useEffect(function () {\n    if (serverOrder != [] && userData != undefined) {\n      axios.post(APIbaseURL + '/order/new', serverOrder).then(function (response) {\n        setTimeout(function () {\n          deleteAllFromCart();\n          navigation.navigate('Settings');\n        }, 1000);\n      }).catch(function () {});\n    }\n  }, [serverOrder, userData]);\n\n  var placeOrder = function placeOrder() {\n    var Order = cartItems.map(function (item) {\n      return {\n        quantity: item.quantity,\n        productId: item._id,\n        title: item.title,\n        price: item.price\n      };\n    });\n    setServerOrder({\n      userId: userData._id,\n      price: price,\n      paymentStatus: 'approved',\n      paymentMode: 'credit card',\n      date: new Date(),\n      orderProducts: Order,\n      shipTo: {\n        name: userData.name,\n        addressLine1: userData.addressLine1,\n        addressLine2: userData.addressLine2,\n        city: 'Chennai',\n        state: 'TN',\n        zip: 600010\n      }\n    });\n  };\n\n  return React.createElement(ScrollView, {\n    contentContainerStyle: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 24,\n      textTransform: 'uppercase',\n      letterSpacing: 2,\n      marginTop: 50,\n      marginBottom: cartItems[0] ? 0 : 50\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }\n  }, \"Cart Screen\"), cartItems[0] ? React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 8\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return deleteAllFromCart();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 8\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: '#fff',\n      backgroundColor: '#c01c27',\n      padding: 10,\n      marginTop: 10,\n      marginBottom: 20,\n      fontSize: 14,\n      textTransform: 'uppercase',\n      letterSpacing: 2\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, \"Clear Cart\")), React.createElement(Text, {\n    style: {\n      padding: 10,\n      marginTop: 10,\n      marginBottom: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }, cartItems.length, \" items\")) : React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 16\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, \"No items present in the cart. \"), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate('Home');\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: {\n      padding: 15,\n      marginTop: 15,\n      backgroundColor: '#c01c27',\n      color: '#fff',\n      width: '60%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, \"View Products\"))), React.createElement(View, {\n    style: {\n      flex: 1,\n      alignItems: 'flex-start',\n      alignSelf: 'stretch'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 12\n    }\n  }, React.createElement(FlatList, {\n    data: cartItems,\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item,\n          index = _ref3.index;\n      return _renderCart({\n        item: item,\n        index: index\n      });\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item.id.toString();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 14\n    }\n  }), React.createElement(View, {\n    style: {\n      flex: 1,\n      width: '100%',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }\n  }, \"Total Price:\\u20B9\", price, \".00/-\"), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return placeOrder();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: {\n      padding: 15,\n      marginTop: 15,\n      backgroundColor: '#c01c27',\n      color: '#fff',\n      width: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }, \"Place Order\")))));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    cartItems: state.cartData,\n    userData: state.userData.user\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    addToCart: function addToCart(item, addToast, quantityCount, selectedProductColor, selectedProductSize) {\n      dispatch(_addToCart(item, addToast, quantityCount, selectedProductColor, selectedProductSize));\n    },\n    decreaseQuantity: function decreaseQuantity(item, addToast) {\n      dispatch(_decreaseQuantity(item, addToast));\n    },\n    deleteFromCart: function deleteFromCart(item, addToast) {\n      dispatch(_deleteFromCart(item, addToast));\n    },\n    deleteAllFromCart: function deleteAllFromCart(addToast) {\n      dispatch(_deleteAllFromCart(addToast));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);\nvar css = StyleSheet.create({\n  renderItemImg: {\n    width: 75,\n    height: 75,\n    borderRadius: 5,\n    justifyContent: 'center'\n  },\n  renderCartItem: {\n    flex: 1,\n    flexDirection: 'row',\n    width: '100%',\n    justifyContent: 'space-evenly',\n    alignItems: 'center',\n    marginTop: 10,\n    paddingBottom: 10,\n    marginBottom: 10\n  }\n});","map":{"version":3,"sources":["/Users/rohitparakh/Downloads/mobile-mern-first-main/Rohit-App/src/screens/Cart.js"],"names":["React","useState","useEffect","AntDesign","APIbaseURL","styles","connect","ScrollView","FlatList","axios","addToCart","decreaseQuantity","deleteFromCart","deleteAllFromCart","Cart","navigation","cartItems","userData","price","setPrice","serverOrder","setServerOrder","_renderCart","item","index","navigate","css","renderCartItem","flex","flexDirection","alignItems","marginLeft","marginRight","renderItemImg","uri","title","justifyContent","position","top","right","maxHeight","color","backgroundColor","padding","paddingHorizontal","paddingVertical","quantity","computeOrderFromCart","forEach","prev","undefined","post","then","response","setTimeout","catch","placeOrder","Order","map","productId","_id","userId","paymentStatus","paymentMode","date","Date","orderProducts","shipTo","name","addressLine1","addressLine2","city","state","zip","container","fontSize","textTransform","letterSpacing","marginTop","marginBottom","length","width","alignSelf","id","toString","mapStateToProps","cartData","user","mapDispatchToProps","dispatch","addToast","quantityCount","selectedProductColor","selectedProductSize","StyleSheet","create","height","borderRadius","paddingBottom"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAAyBC,SAAzB,QAA0C,OAA1C;;;;;;AAQA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAAOC,UAAP,EAAmBC,MAAnB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,UAAT,EAAqBC,QAArB,QAAqC,8BAArC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAS,IAATA,UAAR,EAAkBC,gBAAgB,IAAhBA,iBAAlB,EAAmCC,cAAc,IAAdA,eAAnC,EAAkDC,iBAAiB,IAAjBA,kBAAlD;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,OAQP;AAAA,MAPJC,UAOI,QAPJA,UAOI;AAAA,MANJC,SAMI,QANJA,SAMI;AAAA,MALJC,QAKI,QALJA,QAKI;AAAA,MAJJP,SAII,QAJJA,SAII;AAAA,MAHJC,gBAGI,QAHJA,gBAGI;AAAA,MAFJC,cAEI,QAFJA,cAEI;AAAA,MADJC,iBACI,QADJA,iBACI;;AACJ,kBAA0BZ,QAAQ,CAAC,CAAD,CAAlC;AAAA;AAAA,MAAOiB,KAAP;AAAA,MAAcC,QAAd;;AACA,mBAAqClB,QAAQ,CAAC,EAAD,CAA7C;AAAA;AAAA,MAAOmB,WAAP;AAAA,MAAmBC,cAAnB;;AAEA,MAAMC,WAAW,GAAC,SAAZA,WAAY,QAAgB;AAAA,QAAdC,IAAc,SAAdA,IAAc;AAAA,QAATC,KAAS,SAATA,KAAS;AACjC,WACE,oBAAC,gBAAD;AAAkB,MAAA,OAAO,EAAE;AAAA,eAAMT,UAAU,CAACU,QAAX,CAAoB,SAApB,EAA8B;AAAEF,UAAAA,IAAI,EAAJA;AAAF,SAA9B,CAAN;AAAA,OAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACW,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEG,GAAG,CAACC,cAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,IAAI,EAAC,CAAN;AAAQC,QAAAA,aAAa,EAAC,KAAtB;AAA4BC,QAAAA,UAAU,EAAC,QAAvC;AAAgDC,QAAAA,UAAU,EAAC;AAA3D,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACC,QAAAA,WAAW,EAAC;AAAb,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA+B,EAAER,KAAjC,MADJ,EAEE,oBAAC,KAAD;AAAO,MAAA,KAAK,EAAEE,GAAG,CAACO,aAAlB;AAAiC,MAAA,MAAM,EAAE;AAACC,QAAAA,GAAG,4CAAyCX,IAAI,CAACY;AAAlD,OAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACJ,QAAAA,UAAU,EAAC,EAAZ;AAAeH,QAAAA,IAAI,EAAC,CAApB;AAAsBQ,QAAAA,cAAc,EAAC;AAArC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAOb,IAAI,CAACY,KAAZ,CADF,EAEE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAASZ,IAAI,CAACL,KAAd,CAFF,CAHF,CAFA,EAUE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACmB,QAAAA,QAAQ,EAAC,UAAV;AAAqBC,QAAAA,GAAG,EAAC,EAAzB;AAA4BC,QAAAA,KAAK,EAAC,KAAlC;AAAwCC,QAAAA,SAAS,EAAC,EAAlD;AAAqDR,QAAAA,WAAW,EAAC,CAAC;AAAlE,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACO,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACJ,QAAAA,IAAI,EAAC,CAAN;AAAQC,QAAAA,aAAa,EAAC;AAAtB,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,oBAAC,gBAAD;AAAkB,MAAA,OAAO,EAAE;AAAA,eAAIlB,gBAAgB,CAACY,IAAD,EAAM,IAAN,CAApB;AAAA,OAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACkB,QAAAA,KAAK,EAAC,MAAP;AAAcC,QAAAA,eAAe,EAAC,SAA9B;AAAwCC,QAAAA,OAAO,EAAC;AAAhD,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADA,CADN,EAIM,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACf,QAAAA,IAAI,EAAC,CAAN;AAAQa,QAAAA,KAAK,EAAC,MAAd;AAAqBC,QAAAA,eAAe,EAAC,MAArC;AAA4CE,QAAAA,iBAAiB,EAAC,EAA9D;AAAiEC,QAAAA,eAAe,EAAC;AAAjF,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoGtB,IAAI,CAACuB,QAAzG,CAJN,EAKM,oBAAC,gBAAD;AAAkB,MAAA,OAAO,EAAE;AAAA,eAAIpC,SAAS,CAACa,IAAD,EAAM,IAAN,EAAW,CAAX,EAAa,IAAb,EAAkB,IAAlB,CAAb;AAAA,OAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACkB,QAAAA,KAAK,EAAC,MAAP;AAAcC,QAAAA,eAAe,EAAC,SAA9B;AAAwCC,QAAAA,OAAO,EAAC;AAAhD,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WADA,CALN,CADP,CAVF,EAqBE,oBAAC,gBAAD;AAAkB,MAAA,KAAK,EAAE;AAACX,QAAAA,WAAW,EAAC;AAAb,OAAzB;AAA2C,MAAA,OAAO,EAAE;AAAA,eAAIpB,cAAc,CAACW,IAAD,CAAlB;AAAA,OAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEa,oBAAC,SAAD;AAAW,MAAA,IAAI,EAAC,QAAhB;AAAyB,MAAA,IAAI,EAAE,EAA/B;AAAmC,MAAA,KAAK,EAAC,SAAzC;AAAmD,MAAA,KAAK,EAAE;AAACqB,QAAAA,iBAAiB,EAAC;AAAnB,OAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFb,CArBF,CADX,CADF;AAgCA,GAjCD;;AAmCA,MAAMG,oBAAoB,GAAC,SAArBA,oBAAqB,GAAI;AAC7B5B,IAAAA,QAAQ,CAAC,CAAD,CAAR;AAEAH,IAAAA,SAAS,CAACgC,OAAV,CAAkB,UAACzB,IAAD,EAAQ;AACzBJ,MAAAA,QAAQ,CAAC,UAAC8B,IAAD;AAAA,eAAQA,IAAI,GAAE1B,IAAI,CAACL,KAAL,GAAWK,IAAI,CAACuB,QAA9B;AAAA,OAAD,CAAR;AAEA,KAHD;AAKD,GARD;;AAUA5C,EAAAA,SAAS,CAAC,YAAM;AACdiB,IAAAA,QAAQ,CAAC,CAAD,CAAR;AACA4B,IAAAA,oBAAoB;AACrB,GAHQ,EAGN,CAAC/B,SAAD,CAHM,CAAT;AAKAd,EAAAA,SAAS,CAAC,YAAM;AAEd,QAAGkB,WAAW,IAAE,EAAb,IAAmBH,QAAQ,IAAEiC,SAAhC,EAA0C;AACxCzC,MAAAA,KAAK,CAAC0C,IAAN,CAAW/C,UAAU,GAAC,YAAtB,EAAmCgB,WAAnC,EACCgC,IADD,CACM,UAACC,QAAD,EAAY;AAChBC,QAAAA,UAAU,CAAC,YAAM;AACfzC,UAAAA,iBAAiB;AACjBE,UAAAA,UAAU,CAACU,QAAX,CAAoB,UAApB;AACD,SAHS,EAGP,IAHO,CAAV;AAID,OAND,EAMG8B,KANH,CAMS,YAAI,CACZ,CAPD;AAQD;AAEF,GAbQ,EAaN,CAACnC,WAAD,EAAaH,QAAb,CAbM,CAAT;;AAeA,MAAMuC,UAAU,GAAC,SAAXA,UAAW,GAAI;AACnB,QAAIC,KAAK,GAACzC,SAAS,CAAC0C,GAAV,CAAc,UAACnC,IAAD,EAAQ;AAC9B,aAAM;AAACuB,QAAAA,QAAQ,EAACvB,IAAI,CAACuB,QAAf;AACJa,QAAAA,SAAS,EAACpC,IAAI,CAACqC,GADX;AAEJzB,QAAAA,KAAK,EAACZ,IAAI,CAACY,KAFP;AAGJjB,QAAAA,KAAK,EAACK,IAAI,CAACL;AAHP,OAAN;AAID,KALS,CAAV;AAMAG,IAAAA,cAAc,CAAC;AACbwC,MAAAA,MAAM,EAAC5C,QAAQ,CAAC2C,GADH;AAEb1C,MAAAA,KAAK,EAACA,KAFO;AAGb4C,MAAAA,aAAa,EAAC,UAHD;AAIbC,MAAAA,WAAW,EAAC,aAJC;AAKbC,MAAAA,IAAI,EAAC,IAAIC,IAAJ,EALQ;AAMbC,MAAAA,aAAa,EAACT,KAND;AAObU,MAAAA,MAAM,EAAC;AACHC,QAAAA,IAAI,EAACnD,QAAQ,CAACmD,IADX;AAEHC,QAAAA,YAAY,EAACpD,QAAQ,CAACoD,YAFnB;AAGHC,QAAAA,YAAY,EAACrD,QAAQ,CAACqD,YAHnB;AAIHC,QAAAA,IAAI,EAAC,SAJF;AAKHC,QAAAA,KAAK,EAAC,IALH;AAMHC,QAAAA,GAAG,EAAC;AAND;AAPM,KAAD,CAAd;AAiBD,GAxBD;;AA2BI,SACE,oBAAC,UAAD;AAAY,IAAA,qBAAqB,EAAEpE,MAAM,CAACqE,SAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACC,MAAAA,QAAQ,EAAC,EAAV;AAAaC,MAAAA,aAAa,EAAC,WAA3B;AAAuCC,MAAAA,aAAa,EAAC,CAArD;AAAuDC,MAAAA,SAAS,EAAC,EAAjE;AAAoEC,MAAAA,YAAY,EAAC/D,SAAS,CAAC,CAAD,CAAT,GAAa,CAAb,GAAe;AAAhG,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADA,EAEAA,SAAS,CAAC,CAAD,CAAT,GACD,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACa,MAAAA,aAAa,EAAC,KAAf;AAAqBC,MAAAA,UAAU,EAAC;AAAhC,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAIjB,iBAAiB,EAArB;AAAA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAC4B,MAAAA,KAAK,EAAC,MAAP;AAAcC,MAAAA,eAAe,EAAC,SAA9B;AAAwCC,MAAAA,OAAO,EAAC,EAAhD;AAAmDmC,MAAAA,SAAS,EAAC,EAA7D;AAAgEC,MAAAA,YAAY,EAAC,EAA7E;AACbJ,MAAAA,QAAQ,EAAC,EADI;AACDC,MAAAA,aAAa,EAAC,WADb;AACyBC,MAAAA,aAAa,EAAC;AADvC,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADH,CADA,EAKC,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAClC,MAAAA,OAAO,EAAC,EAAT;AAAYmC,MAAAA,SAAS,EAAC,EAAtB;AAAyBC,MAAAA,YAAY,EAAC;AAAtC,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyD/D,SAAS,CAACgE,MAAnE,WALD,CADC,GASE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACpD,MAAAA,IAAI,EAAC,CAAN;AAAQQ,MAAAA,cAAc,EAAC,QAAvB;AAAgCN,MAAAA,UAAU,EAAC;AAA3C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACF,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAC6C,MAAAA,QAAQ,EAAC;AAAV,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADE,EAEF,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAI5D,UAAU,CAACU,QAAX,CAAoB,MAApB,CAAJ;AAAA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACA,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACkB,MAAAA,OAAO,EAAC,EAAT;AAAYmC,MAAAA,SAAS,EAAC,EAAtB;AAAyBpC,MAAAA,eAAe,EAAC,SAAzC;AAAmDD,MAAAA,KAAK,EAAC,MAAzD;AAAgEwC,MAAAA,KAAK,EAAC;AAAtE,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADA,CAFE,CAXF,EAmBG,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACrD,MAAAA,IAAI,EAAC,CAAN;AAAQE,MAAAA,UAAU,EAAC,YAAnB;AAAgCoD,MAAAA,SAAS,EAAC;AAA1C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AACS,IAAA,IAAI,EAAElE,SADf;AAES,IAAA,UAAU,EAAE;AAAA,UAAEO,IAAF,SAAEA,IAAF;AAAA,UAAOC,KAAP,SAAOA,KAAP;AAAA,aAAgBF,WAAW,CAAC;AAACC,QAAAA,IAAI,EAAJA,IAAD;AAAMC,QAAAA,KAAK,EAALA;AAAN,OAAD,CAA3B;AAAA,KAFrB;AAGS,IAAA,YAAY,EAAE,sBAAAD,IAAI;AAAA,aAAEA,IAAI,CAAC4D,EAAL,CAAQC,QAAR,EAAF;AAAA,KAH3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAMD,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACxD,MAAAA,IAAI,EAAC,CAAN;AAAQqD,MAAAA,KAAK,EAAC,MAAd;AAAqBnD,MAAAA,UAAU,EAAC,QAAhC;AAAyCM,MAAAA,cAAc,EAAC;AAAxD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BACsBlB,KADtB,UADF,EAIA,oBAAC,gBAAD;AAAkB,IAAA,OAAO,EAAE;AAAA,aAAIsC,UAAU,EAAd;AAAA,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACF,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACb,MAAAA,OAAO,EAAC,EAAT;AAAYmC,MAAAA,SAAS,EAAC,EAAtB;AAAyBpC,MAAAA,eAAe,EAAC,SAAzC;AAAmDD,MAAAA,KAAK,EAAC,MAAzD;AAAgEwC,MAAAA,KAAK,EAAC;AAAtE,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADE,CAJA,CANC,CAnBH,CADF;AAsCL,CA9ID;;AAgJA,IAAMI,eAAe,GAAG,SAAlBA,eAAkB,CAAAb,KAAK,EAAI;AAC/B,SAAO;AACLxD,IAAAA,SAAS,EAAEwD,KAAK,CAACc,QADZ;AAELrE,IAAAA,QAAQ,EAAEuD,KAAK,CAACvD,QAAN,CAAesE;AAFpB,GAAP;AAID,CALD;;AAOA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ,EAAI;AACrC,SAAO;AACL/E,IAAAA,SAAS,EAAE,mBACTa,IADS,EAETmE,QAFS,EAGTC,aAHS,EAITC,oBAJS,EAKTC,mBALS,EAMN;AACHJ,MAAAA,QAAQ,CACN/E,UAAS,CACPa,IADO,EAEPmE,QAFO,EAGPC,aAHO,EAIPC,oBAJO,EAKPC,mBALO,CADH,CAAR;AASD,KAjBI;AAkBLlF,IAAAA,gBAAgB,EAAE,0BAACY,IAAD,EAAOmE,QAAP,EAAoB;AACpCD,MAAAA,QAAQ,CAAC9E,iBAAgB,CAACY,IAAD,EAAOmE,QAAP,CAAjB,CAAR;AACD,KApBI;AAqBL9E,IAAAA,cAAc,EAAE,wBAACW,IAAD,EAAOmE,QAAP,EAAoB;AAClCD,MAAAA,QAAQ,CAAC7E,eAAc,CAACW,IAAD,EAAOmE,QAAP,CAAf,CAAR;AACD,KAvBI;AAwBL7E,IAAAA,iBAAiB,EAAE,2BAAA6E,QAAQ,EAAI;AAC7BD,MAAAA,QAAQ,CAAC5E,kBAAiB,CAAC6E,QAAD,CAAlB,CAAR;AACD;AA1BI,GAAP;AA4BD,CA7BD;;AA+BA,eAAepF,OAAO,CAAC+E,eAAD,EAAiBG,kBAAjB,CAAP,CAA4C1E,IAA5C,CAAf;AAEA,IAAMY,GAAG,GAACoE,UAAU,CAACC,MAAX,CAAkB;AACzB9D,EAAAA,aAAa,EAAE;AACZgD,IAAAA,KAAK,EAAE,EADK;AAEZe,IAAAA,MAAM,EAAE,EAFI;AAGZC,IAAAA,YAAY,EAAE,CAHF;AAIZ7D,IAAAA,cAAc,EAAC;AAJH,GADU;AAO1BT,EAAAA,cAAc,EAAC;AACXC,IAAAA,IAAI,EAAC,CADM;AAEXC,IAAAA,aAAa,EAAC,KAFH;AAGXoD,IAAAA,KAAK,EAAC,MAHK;AAIX7C,IAAAA,cAAc,EAAC,cAJJ;AAKXN,IAAAA,UAAU,EAAC,QALA;AAMXgD,IAAAA,SAAS,EAAE,EANA;AAOXoB,IAAAA,aAAa,EAAE,EAPJ;AAQXnB,IAAAA,YAAY,EAAE;AARH;AAPW,CAAlB,CAAV","sourcesContent":["import React, { useState,useEffect } from \"react\";\r\nimport {\r\n  View,\r\n  Image,\r\n  StyleSheet,\r\n  TouchableOpacity,\r\n  Text\r\n} from \"react-native\";\r\nimport { AntDesign } from '@expo/vector-icons'; \r\nimport{APIbaseURL, styles} from \"../../App\"\r\nimport { connect } from \"react-redux\";\r\nimport { ScrollView, FlatList } from 'react-native-gesture-handler';\r\nimport axios from 'axios';\r\nimport {addToCart,decreaseQuantity,deleteFromCart,deleteAllFromCart} from '../../redux/actions/cartActions'\r\n\r\nconst Cart = ({\r\n  navigation,\r\n  cartItems,\r\n  userData,\r\n  addToCart,\r\n  decreaseQuantity,\r\n  deleteFromCart,\r\n  deleteAllFromCart\r\n}) => {\r\n  const [price, setPrice] = useState(0)\r\n  const [serverOrder,setServerOrder] = useState({});\r\n\r\n  const _renderCart=({item,index})=>{\r\n   return (\r\n     <TouchableOpacity onPress={() => navigation.navigate('Details',{ item })}>\r\n                <View style={css.renderCartItem}>\r\n\r\n                <View style={{flex:1,flexDirection:'row',alignItems:'center',marginLeft:15}}>\r\n                    <Text style={{marginRight:5}}>{++index}.</Text>\r\n                  <Image style={css.renderItemImg} source={{uri:`https://source.unsplash.com/190x150/?${item.title}`}}></Image>\r\n                  <View style={{marginLeft:15,flex:1,justifyContent:'center'}}>\r\n                    <Text>{item.title}</Text>\r\n                    <Text>â‚¹ {item.price}</Text>\r\n                  </View>\r\n                  </View>\r\n                  <View style={{position:'absolute',top:15,right:'20%',maxHeight:45,marginRight:-15}}>\r\n                         <View style={{flex:1,flexDirection:'row'}}>\r\n                               <TouchableOpacity onPress={()=>decreaseQuantity(item,null)}>\r\n                               <Text style={{color:'#fff',backgroundColor:'#c01c27',padding:15}} >-</Text>\r\n                               </TouchableOpacity>\r\n                               <Text style={{flex:0,color:'#fff',backgroundColor:'#666',paddingHorizontal:10,paddingVertical:15}}>{item.quantity}</Text>\r\n                               <TouchableOpacity onPress={()=>addToCart(item,null,1,null,null)}>\r\n                               <Text style={{color:'#fff',backgroundColor:'#c01c27',padding:15}}>+</Text>\r\n                               </TouchableOpacity>\r\n                               </View>\r\n                  </View>\r\n                  <TouchableOpacity style={{marginRight:15}} onPress={()=>deleteFromCart(item)}>\r\n                               {/* <Text style={{color:'#fff',backgroundColor:'#c01c27',padding:15}}> */}\r\n                               <AntDesign name=\"delete\" size={20} color=\"#c01c27\" style={{paddingHorizontal:15}} />\r\n                               {/* </Text> */}\r\n\r\n                               </TouchableOpacity>\r\n                </View>\r\n</TouchableOpacity>\r\n)\r\n  }\r\n   \r\n  const computeOrderFromCart=()=>{\r\n    setPrice(0)\r\n\r\n    cartItems.forEach((item)=>{\r\n     setPrice((prev)=>prev+(item.price*item.quantity))\r\n\r\n    })\r\n\r\n  }\r\n  \r\n  useEffect(() => {\r\n    setPrice(0)\r\n    computeOrderFromCart()  \r\n  }, [cartItems])\r\n\r\n  useEffect(() => {\r\n\r\n    if(serverOrder!=[] && userData!=undefined){\r\n      axios.post(APIbaseURL+'/order/new',serverOrder)\r\n      .then((response)=>{\r\n        setTimeout(() => {\r\n          deleteAllFromCart()\r\n          navigation.navigate('Settings')\r\n        }, 1000);\r\n      }).catch(()=>{\r\n      })\r\n    }\r\n\r\n  }, [serverOrder,userData])\r\n\r\n  const placeOrder=()=>{\r\n    let Order=cartItems.map((item)=>{\r\n      return{quantity:item.quantity,\r\n        productId:item._id,\r\n        title:item.title,\r\n        price:item.price}\r\n    })\r\n    setServerOrder({\r\n      userId:userData._id,\r\n      price:price,\r\n      paymentStatus:'approved',\r\n      paymentMode:'credit card',\r\n      date:new Date(),\r\n      orderProducts:Order,\r\n      shipTo:{\r\n          name:userData.name,\r\n          addressLine1:userData.addressLine1,\r\n          addressLine2:userData.addressLine2,\r\n          city:'Chennai',\r\n          state:'TN',\r\n          zip:600010\r\n        }\r\n    })\r\n    \r\n  }\r\n\r\n  \r\n      return (\r\n        <ScrollView contentContainerStyle={styles.container}>\r\n        <Text style={{fontSize:24,textTransform:'uppercase',letterSpacing:2,marginTop:50,marginBottom:cartItems[0]?0:50}}>Cart Screen</Text>\r\n       {cartItems[0]?(\r\n       <View style={{flexDirection:'row',alignItems:'center'}}>\r\n       <TouchableOpacity onPress={()=>deleteAllFromCart()}>\r\n          <Text style={{color:'#fff',backgroundColor:'#c01c27',padding:10,marginTop:10,marginBottom:20,\r\n          fontSize:14,textTransform:'uppercase',letterSpacing:2,}} >Clear Cart</Text>\r\n        </TouchableOpacity>\r\n        <Text style={{padding:10,marginTop:10,marginBottom:20}}>{cartItems.length} items</Text>\r\n        </View>\r\n        ):(\r\n          <View style={{flex:1,justifyContent:'center',alignItems:'center'}}>\r\n        <Text style={{fontSize:16}}>No items present in the cart. </Text>\r\n        <TouchableOpacity onPress={()=>navigation.navigate('Home')}>\r\n        <Text style={{padding:15,marginTop:15,backgroundColor:'#c01c27',color:'#fff',width:'60%'}}>View Products</Text>\r\n        </TouchableOpacity>\r\n        </View>\r\n        )}\r\n        \r\n           <View style={{flex:1,alignItems:'flex-start',alignSelf:'stretch'}}>\r\n             <FlatList\r\n                      data={cartItems}\r\n                      renderItem={({item,index})=>_renderCart({item,index})}\r\n                      keyExtractor={item=>item.id.toString()}\r\n                  />\r\n          <View style={{flex:1,width:'100%',alignItems:'center',justifyContent:'center'}}>\r\n            <Text>\r\n              Total Price:&#8377;{price}.00/-\r\n            </Text>\r\n          <TouchableOpacity onPress={()=>placeOrder()}>\r\n        <Text style={{padding:15,marginTop:15,backgroundColor:'#c01c27',color:'#fff',width:'100%'}}>Place Order</Text>\r\n        </TouchableOpacity>\r\n          </View>    \r\n          </View>\r\n          \r\n        </ScrollView>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    cartItems: state.cartData,\r\n    userData: state.userData.user\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    addToCart: (\r\n      item,\r\n      addToast,\r\n      quantityCount,\r\n      selectedProductColor,\r\n      selectedProductSize\r\n    ) => {\r\n      dispatch( \r\n        addToCart(\r\n          item,\r\n          addToast,\r\n          quantityCount,\r\n          selectedProductColor,\r\n          selectedProductSize\r\n        )\r\n      );\r\n    },\r\n    decreaseQuantity: (item, addToast) => {\r\n      dispatch(decreaseQuantity(item, addToast));\r\n    },\r\n    deleteFromCart: (item, addToast) => {\r\n      dispatch(deleteFromCart(item, addToast));\r\n    },\r\n    deleteAllFromCart: addToast => {\r\n      dispatch(deleteAllFromCart(addToast));\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Cart);\r\n\r\nconst css=StyleSheet.create({\r\n   renderItemImg: {\r\n      width: 75, \r\n      height: 75, \r\n      borderRadius: 5,\r\n      justifyContent:'center'\r\n  },\r\n  renderCartItem:{\r\n      flex:1,\r\n      flexDirection:'row',\r\n      width:'100%',\r\n      justifyContent:'space-evenly',\r\n      alignItems:'center',\r\n      marginTop: 10,\r\n      paddingBottom: 10,\r\n      marginBottom: 10\r\n  }\r\n})"]},"metadata":{},"sourceType":"module"}