{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport 'react-native-get-random-values';\nimport { v4 as uuidv4 } from \"uuid\";\nimport { ADD_TO_CART, DECREASE_QUANTITY, DELETE_FROM_CART, DELETE_ALL_FROM_CART } from \"../actions/cartActions\";\nvar initState = [];\n\nvar cartReducer = function cartReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var cartItems = state,\n      product = action.payload;\n\n  if (action.type === ADD_TO_CART) {\n    if (product.variation === undefined) {\n      var cartItem = cartItems.filter(function (item) {\n        return item.id === product.id;\n      })[0];\n\n      if (cartItem === undefined) {\n        return [].concat(_toConsumableArray(cartItems), [_objectSpread(_objectSpread({}, product), {}, {\n          quantity: product.quantity ? product.quantity : 1,\n          cartItemId: uuidv4()\n        })]);\n      } else {\n        return cartItems.map(function (item) {\n          return item.cartItemId === cartItem.cartItemId ? _objectSpread(_objectSpread({}, item), {}, {\n            quantity: product.quantity ? item.quantity + product.quantity : item.quantity + 1\n          }) : item;\n        });\n      }\n    } else {\n      var _cartItem = cartItems.filter(function (item) {\n        return item.id === product.id && product.selectedProductColor && product.selectedProductColor === item.selectedProductColor && product.selectedProductSize && product.selectedProductSize === item.selectedProductSize && (product.cartItemId ? product.cartItemId === item.cartItemId : true);\n      })[0];\n\n      if (_cartItem === undefined) {\n        return [].concat(_toConsumableArray(cartItems), [_objectSpread(_objectSpread({}, product), {}, {\n          quantity: product.quantity ? product.quantity : 1,\n          cartItemId: uuidv4()\n        })]);\n      } else if (_cartItem !== undefined && (_cartItem.selectedProductColor !== product.selectedProductColor || _cartItem.selectedProductSize !== product.selectedProductSize)) {\n        return [].concat(_toConsumableArray(cartItems), [_objectSpread(_objectSpread({}, product), {}, {\n          quantity: product.quantity ? product.quantity : 1,\n          cartItemId: uuidv4()\n        })]);\n      } else {\n        return cartItems.map(function (item) {\n          return item.cartItemId === _cartItem.cartItemId ? _objectSpread(_objectSpread({}, item), {}, {\n            quantity: product.quantity ? item.quantity + product.quantity : item.quantity + 1,\n            selectedProductColor: product.selectedProductColor,\n            selectedProductSize: product.selectedProductSize\n          }) : item;\n        });\n      }\n    }\n  }\n\n  if (action.type === DECREASE_QUANTITY) {\n    var findProductInCart = function findProductInCart(cartItems, product) {\n      return cartItems.filter(function (cartItem) {\n        return cartItem.id === product.id;\n      });\n    };\n\n    var productInCart = findProductInCart(cartItems, product);\n\n    if (productInCart[0].quantity === 1) {\n      var remainingItems = function remainingItems(cartItems, product) {\n        return cartItems.filter(function (cartItem) {\n          return cartItem.cartItemId !== product.cartItemId;\n        });\n      };\n\n      return remainingItems(cartItems, productInCart[0]);\n    } else {\n      return cartItems.map(function (item) {\n        return item.cartItemId === productInCart[0].cartItemId ? _objectSpread(_objectSpread({}, item), {}, {\n          quantity: item.quantity - 1\n        }) : item;\n      });\n    }\n  }\n\n  if (action.type === DELETE_FROM_CART) {\n    var _remainingItems = function _remainingItems(cartItems, product) {\n      return cartItems.filter(function (cartItem) {\n        return cartItem.cartItemId !== product.cartItemId;\n      });\n    };\n\n    return _remainingItems(cartItems, product);\n  }\n\n  if (action.type === DELETE_ALL_FROM_CART) {\n    return cartItems.filter(function (item) {\n      return false;\n    });\n  }\n\n  return state;\n};\n\nexport default cartReducer;","map":{"version":3,"sources":["/Users/rohitparakh/Desktop/Mobile Apps/Rohit-mern-app/Rohit-App/redux/reducers/cartReducer.js"],"names":["v4","uuidv4","ADD_TO_CART","DECREASE_QUANTITY","DELETE_FROM_CART","DELETE_ALL_FROM_CART","initState","cartReducer","state","action","cartItems","product","payload","type","variation","undefined","cartItem","filter","item","id","quantity","cartItemId","map","selectedProductColor","selectedProductSize","findProductInCart","productInCart","remainingItems"],"mappings":"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","sourcesContent":["import 'react-native-get-random-values';\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport {\r\n  ADD_TO_CART,\r\n  DECREASE_QUANTITY,\r\n  DELETE_FROM_CART,\r\n  DELETE_ALL_FROM_CART\r\n} from \"../actions/cartActions\";\r\n\r\nconst initState = [];\r\n\r\nconst cartReducer = (state = initState, action) => {\r\n  const cartItems = state,\r\n    product = action.payload;\r\n\r\n  if (action.type === ADD_TO_CART) {\r\n    // for non variant products\r\n    if (product.variation === undefined) {\r\n      const cartItem = cartItems.filter(item => item.id === product.id)[0];\r\n      if (cartItem === undefined) {\r\n        return [\r\n          ...cartItems,\r\n          {\r\n            ...product,\r\n            quantity: product.quantity ? product.quantity : 1,\r\n            cartItemId: uuidv4()\r\n          }\r\n        ];\r\n      } else {\r\n        return cartItems.map(item =>\r\n          item.cartItemId === cartItem.cartItemId\r\n            ? {\r\n                ...item,\r\n                quantity: product.quantity\r\n                  ? item.quantity + product.quantity\r\n                  : item.quantity + 1\r\n              }\r\n            : item\r\n        );\r\n      }\r\n      // for variant products\r\n    } else {\r\n      const cartItem = cartItems.filter(\r\n        item =>\r\n          item.id === product.id &&\r\n          product.selectedProductColor &&\r\n          product.selectedProductColor === item.selectedProductColor &&\r\n          product.selectedProductSize &&\r\n          product.selectedProductSize === item.selectedProductSize &&\r\n          (product.cartItemId ? product.cartItemId === item.cartItemId : true)\r\n      )[0];\r\n\r\n      if (cartItem === undefined) {\r\n        return [\r\n          ...cartItems,\r\n          {\r\n            ...product,\r\n            quantity: product.quantity ? product.quantity : 1,\r\n            cartItemId: uuidv4()\r\n          }\r\n        ];\r\n      } else if (\r\n        cartItem !== undefined &&\r\n        (cartItem.selectedProductColor !== product.selectedProductColor ||\r\n          cartItem.selectedProductSize !== product.selectedProductSize)\r\n      ) {\r\n        return [\r\n          ...cartItems,\r\n          {\r\n            ...product,\r\n            quantity: product.quantity ? product.quantity : 1,\r\n            cartItemId: uuidv4()\r\n          }\r\n        ];\r\n      } else {\r\n        return cartItems.map(item =>\r\n          item.cartItemId === cartItem.cartItemId\r\n            ? {\r\n                ...item,\r\n                quantity: product.quantity\r\n                  ? item.quantity + product.quantity\r\n                  : item.quantity + 1,\r\n                selectedProductColor: product.selectedProductColor,\r\n                selectedProductSize: product.selectedProductSize\r\n              }\r\n            : item\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  if (action.type === DECREASE_QUANTITY) {\r\n   const findProductInCart = (cartItems, product) =>\r\n        cartItems.filter(\r\n          cartItem => cartItem.id === product.id\r\n        );        \r\n    const productInCart=findProductInCart(cartItems, product)\r\n    \r\n    if (productInCart[0].quantity === 1) {\r\n      const remainingItems = (cartItems, product) =>\r\n        cartItems.filter(\r\n          cartItem => cartItem.cartItemId !== product.cartItemId\r\n        );\r\n      return remainingItems(cartItems, productInCart[0]);\r\n    } else {\r\n      return cartItems.map(item =>\r\n        item.cartItemId === productInCart[0].cartItemId\r\n          ? { ...item, quantity: item.quantity - 1 }\r\n          : item\r\n      );\r\n    }\r\n  }\r\n\r\n  if (action.type === DELETE_FROM_CART) {\r\n    const remainingItems = (cartItems, product) =>\r\n      cartItems.filter(cartItem => cartItem.cartItemId !== product.cartItemId);\r\n    return remainingItems(cartItems, product);\r\n  }\r\n\r\n  if (action.type === DELETE_ALL_FROM_CART) {\r\n    return cartItems.filter(item => {\r\n      return false;\r\n    });\r\n  }\r\n\r\n  return state;\r\n};\r\n\r\nexport default cartReducer;\r\n"]},"metadata":{},"sourceType":"module"}